description = 'GoCD Plugin for connecting with MicroFocus ALM Octane'

group = "com.hpe.adm.octane.ciplugins"

version = "1.5"

apply plugin: 'base' // provides cleaning task
apply plugin: 'java'
apply plugin: 'idea'
apply plugin: 'eclipse'
apply plugin: 'signing'
apply plugin: 'maven'
apply plugin: 'com.bmuschko.nexus'
apply plugin: "io.codearte.nexus-staging"
//apply plugin: 'info.solidsoft'
apply plugin: 'maven-publish'


//Uploading archives

configurations {
    //deployerJars
        archives
}


/*publishing {
        publications {
                mavenJava(MavenPublication) {
                        from components.java
                }
                mavenCustom(MavenPublication) {
                        pom.withXml {
                        asNode().appendNode('description',
                                'Octane-GOCD Plugin')
                        }
                }

        }

        repositories {
                maven {
//                      url nexusUrl

                        credentials {
                                username = nexusUsername
                                password = nexusPassword
                        }
                                password = nexusPassword
                        }
                }
    }
 }*/

/*task sourcesJar(type: Jar) {
    classifier = 'sources'
    from sourceSets.main.allSource
}*/

/*artifacts {
    archives
}*/

/*uploadArchives {
  repositories {
    mavenDeployer {

      repository(url: "https://oss.sonatype.org/service/local/staging/deploy/maven2/") {
        authentication(userName: nexusUsername, password: nexusPassword)
      }

      snapshotRepository(url: "https://oss.sonatype.org/content/repositories/snapshots/") {
        authentication(userName: nexusUsername, password: nexusPassword)
      }

        }
  }
}*/
nexus {
     sign = true
     repositoryUrl = 'https://oss.sonatype.org/service/local/staging/deploy/maven2/'
     snapshotRepositoryUrl = 'https://oss.sonatype.org/content/repositories/snapshots/'
 }

 buildscript {
     repositories {
jcenter {
            url "http://jcenter.bintray.com/"
        }

//         jcenter()

    maven {
      url "https://plugins.gradle.org/m2/"

    }
    }
}
  dependencies {
        classpath 'com.bmuschko:gradle-nexus-plugin:2.3.1'
        classpath "io.codearte.gradle.nexus:gradle-nexus-staging-plugin:0.11.0"
     }
 }
/*buildscript {
  repositories {
        jcenter {
            url "http://jcenter.bintray.com/"
        }
    maven {
      url "https://plugins.gradle.org/m2/"

    }
  }//repositories
  dependencies {
    classpath "io.codearte.gradle.nexus:gradle-nexus-staging-plugin:0.11.0"
  }
}*/
/*allprojects {
    repositories {
        //jcenter()
        jcenter {
            url "http://jcenter.bintray.com/"
        }
    }
}*/

extraArchive {
     sources = true
     tests = false
     javadoc = false
 }


//Downloading archives
repositories {
        mavenLocal()
        mavenCentral()
 maven  {
        url "http://repo1.maven.org/maven2"
    }

}

